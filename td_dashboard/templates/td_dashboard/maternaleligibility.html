{% load crypto_tags %}
{% load admin_urls %}
<style>
<!--

-->
table {
    border-collapse: collapse;
    border-color: #ccc;
}

td, th {
    font-size: 13px;
    line-height: 16px;
    border-bottom: 1px solid #eee;
    vertical-align: top;
    padding: 8px;
    font-family: "Roboto", "Lucida Grande", Verdana, Arial, sans-serif;
}

th {
    font-weight: 600;
    text-align: left;
}

thead th,
tfoot td {
    color: #666;
    padding: 5px 10px;
    font-size: 11px;
    background: #fff;
    border: none;
    border-top: 1px solid #eee;
    border-bottom: 1px solid #eee;
}

tfoot td {
    border-bottom: none;
    border-top: 1px solid #eee;
}

tr.alt {
    background: #f6f6f6;
}

.row1 {
    background: #fff;
}

.row2 {
    background: #f9f9f9;
}

/* SORTABLE TABLES */

thead th {
    padding: 5px 10px;
    line-height: normal;
    text-transform: uppercase;
    background: #f6f6f6;
}

thead th a:link, thead th a:visited {
    color: #666;
}

thead th.sorted {
    background: #eee;
}

thead th.sorted .text {
    padding-right: 42px;
}

table thead th .text span {
    padding: 8px 10px;
    display: block;
}

table thead th .text a {
    display: block;
    cursor: pointer;
    padding: 8px 10px;
}

table thead th .text a:focus, table thead th .text a:hover {
    background: #eee;
}

thead th.sorted a.sortremove {
    visibility: hidden;
}

table thead th.sorted:hover a.sortremove {
    visibility: visible;
}

table thead th.sorted .sortoptions {
    display: block;
    padding: 9px 5px 0 5px;
    float: right;
    text-align: right;
}

table thead th.sorted .sortpriority {
    font-size: .8em;
    min-width: 12px;
    text-align: center;
    vertical-align: 3px;
    margin-left: 2px;
    margin-right: 2px;
}

table thead th.sorted .sortoptions a {
    position: relative;
    width: 14px;
    height: 14px;
    display: inline-block;
    background: url(../img/sorting-icons.svg) 0 0 no-repeat;
    background-size: 14px auto;
}

table thead th.sorted .sortoptions a.sortremove {
    background-position: 0 0;
}

table thead th.sorted .sortoptions a.sortremove:after {
    content: '\\';
    position: absolute;
    top: -6px;
    left: 3px;
    font-weight: 200;
    font-size: 18px;
    color: #999;
}

table thead th.sorted .sortoptions a.sortremove:focus:after,
table thead th.sorted .sortoptions a.sortremove:hover:after {
    color: #447e9b;
}

table thead th.sorted .sortoptions a.sortremove:focus,
table thead th.sorted .sortoptions a.sortremove:hover {
    background-position: 0 -14px;
}

table thead th.sorted .sortoptions a.ascending {
    background-position: 0 -28px;
}

table thead th.sorted .sortoptions a.ascending:focus,
table thead th.sorted .sortoptions a.ascending:hover {
    background-position: 0 -42px;
}

table thead th.sorted .sortoptions a.descending {
    top: 1px;
    background-position: 0 -56px;
}

table thead th.sorted .sortoptions a.descending:focus,
table thead th.sorted .sortoptions a.descending:hover {
    background-position: 0 -70px;
}
</style>

<div class="panel with panel-success class">
<div class="panel-heading" style="margin-buttom:5px;">Maternal Eligibility</div>
      <table class="table table-bordered table-striped table-hover table-condensed">
        <thead><tr>
        <th>Dashboard</th>
        <th>Eligibility</th>
        <th>Loss</th>
        <th>Registration Date/Time</th>
        <th>Age</th>  
        <th>User Created</th>  
        <th>Date Created</th>
        <th>Host</th>       
        
        </thead>
        <tbody>

      {% for maternal_eligibility in maternal_eligibilities %}
                <tr class="{% cycle 'row2' 'row1' %}">
                {% if maternal_eligibility.is_consented %}
                	<td>
                		<ul>
		                	{% for consent in maternal_eligibility.previous_consents %}
		                		<li><A href="{% url 'subject_dashboard_url' consent.subject_identifier %}"><div nowrap>{{ consent.subject_identifier }} (V{{consent.version}})</div></A></li>
		                	{% endfor %}
		                	{% if not maternal_eligibility.have_latest_consent %}
		                		<span style="color:red"><li><span><A href="{% url 'admin:td_maternal_maternalconsent_add' %}?registered_subject={{maternal_eligibility.registered_subject.pk}}&next=section_url&section_name=maternal">re-consent (V{{maternal_eligibility.current_consent_version}})</A></li>
		                	{% endif %}
		                </ul>
		            </td>
                {% elif maternal_eligibility.is_eligible %}
                    <td><A href="{% url 'admin:td_maternal_maternalconsent_add' %}?registered_subject={{maternal_eligibility.registered_subject.pk}}&next=section_url&section_name=maternal">add maternal consent (V{{maternal_eligibility.current_consent_version}})</A></td>
                {% else %}
                    <td>{{ maternal_eligibility.ineligibility }}</td>
                {% endif %}

                <td><A href="{% url 'admin:td_maternal_maternaleligibility_change' maternal_eligibility.pk %}?&next=section_url&section_name=maternal">edit eligibility</A></td>
                <td>{{maternal_eligibility.maternal_eligibility_loss.reason_ineligible|default:"-----" }}</td>
                <td>{{maternal_eligibility.report_datetime}}</td>
                <td>{{maternal_eligibility.age_in_years}}</td>
                <td>{{maternal_eligibility.user_created}}</td>
                <td>{{maternal_eligibility.created|date:"d M Y H:i"}}</td>
                <td>{{maternal_eligibility.hostname_created}}</td>

      {% endfor %}
      <tr><td colspan="9">{{ maternal_eligibilities.object_list.count }} maternal eligibility records found.</td></tr>
      </tbody>
      </table>
</div>